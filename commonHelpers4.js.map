{"version":3,"file":"commonHelpers4.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst STORAGE_KEY = 'feedback-form-state';\nlet formData = {};\nconst refs = {\n  form: document.querySelector('.feedback-form'),\n  input: document.querySelector('.feedback-form  input'),\n  textarea: document.querySelector('.feedback-form  textarea'),\n};\n\nrefs.form.addEventListener('input', throttle(onFormChange, 500));\nrefs.form.addEventListener('submit', onFormSubmit);\n\nconst getLocalStorage = () => {\n  const savedValues = localStorage.getItem(STORAGE_KEY);\n  const savedDataObject = JSON.parse(savedValues);\n  return savedDataObject;\n};\n\nconst localData = getLocalStorage();\n\n// ?. - if null or undefind = don`t check a\n// check if smth in LocalStorage \n\nif (localData?.email) {\n  refs.form.elements.email.value = localData.email\n}\nif (localData?.message) {\n  refs.form.elements.message.value = localData.message\n}\n\nfunction onFormChange() {\n  const email = refs.form.elements.email.value;\n  const message = refs.form.elements.message.value;\n  if (email) {\n    formData.email = email;\n  }\n\n  if (message) {\n    formData.message = message\n  }\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n}\n\n\nfunction onFormSubmit(e) {\n  e.preventDefault()\n  const data = getLocalStorage();\n  console.log(\"data\", data);\n  localStorage.removeItem(STORAGE_KEY);\n  refs.form.elements.email.value = \"\";\n  refs.form.elements.message.value = \"\";\n}\n"],"names":["STORAGE_KEY","formData","refs","throttle","onFormChange","onFormSubmit","getLocalStorage","savedValues","localData","email","message","e","data"],"mappings":"wIAEA,MAAMA,EAAc,sBACpB,IAAIC,EAAW,CAAA,EACf,MAAMC,EAAO,CACX,KAAM,SAAS,cAAc,gBAAgB,EAC7C,MAAO,SAAS,cAAc,uBAAuB,EACrD,SAAU,SAAS,cAAc,0BAA0B,CAC7D,EAEAA,EAAK,KAAK,iBAAiB,QAASC,EAASC,EAAc,GAAG,CAAC,EAC/DF,EAAK,KAAK,iBAAiB,SAAUG,CAAY,EAEjD,MAAMC,EAAkB,IAAM,CAC5B,MAAMC,EAAc,aAAa,QAAQP,CAAW,EAEpD,OADwB,KAAK,MAAMO,CAAW,CAEhD,EAEMC,EAAYF,EAAe,EAK7BE,GAAA,MAAAA,EAAW,QACbN,EAAK,KAAK,SAAS,MAAM,MAAQM,EAAU,OAEzCA,GAAA,MAAAA,EAAW,UACbN,EAAK,KAAK,SAAS,QAAQ,MAAQM,EAAU,SAG/C,SAASJ,GAAe,CACtB,MAAMK,EAAQP,EAAK,KAAK,SAAS,MAAM,MACjCQ,EAAUR,EAAK,KAAK,SAAS,QAAQ,MACvCO,IACFR,EAAS,MAAQQ,GAGfC,IACFT,EAAS,QAAUS,GAGrB,aAAa,QAAQV,EAAa,KAAK,UAAUC,CAAQ,CAAC,CAC5D,CAGA,SAASI,EAAaM,EAAG,CACvBA,EAAE,eAAgB,EAClB,MAAMC,EAAON,IACb,QAAQ,IAAI,OAAQM,CAAI,EACxB,aAAa,WAAWZ,CAAW,EACnCE,EAAK,KAAK,SAAS,MAAM,MAAQ,GACjCA,EAAK,KAAK,SAAS,QAAQ,MAAQ,EACrC"}